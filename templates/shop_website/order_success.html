{% extends 'shop_website/base.html' %}

{% block title %}Order Success - {{ shop_profile.business_name }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="text-center py-5">
        <i class="fas fa-check-circle fa-5x text-success mb-4"></i>
        <h1 class="mb-3">Order Placed Successfully!</h1>
        <p class="lead mb-4">Thank you for your order. We've received your order and will process it shortly.</p>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Order Details</h5>
            </div>
            <div class="card-body text-start">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Order Number:</strong> {{ order.order_number }}</p>
                        <p><strong>Date:</strong> {{ order.created_at|date:"F d, Y" }}</p>
                        <p><strong>Status:</strong> 
                            <span class="badge bg-warning">{{ order.get_order_status_display }}</span>
                        </p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Customer:</strong> {{ order.customer_name }}</p>
                        <p><strong>Email:</strong> {{ order.customer_email }}</p>
                        <p><strong>Phone:</strong> {{ order.customer_phone }}</p>
                    </div>
                </div>
                
                {% if order.delivery_address %}
                <div class="mt-3">
                    <p><strong>Delivery Address:</strong></p>
                    <p class="text-muted">{{ order.delivery_address }}</p>
                </div>
                {% endif %}
                
                {% if order.notes %}
                <div class="mt-3">
                    <p><strong>Special Instructions:</strong></p>
                    <p class="text-muted">{{ order.notes }}</p>
                </div>
                {% endif %}
                
                <hr>
                
                <h6>Order Items:</h6>
                {% for item in order.items.all %}
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <div>
                        <strong>{{ item.quantity }}x {{ item.product.name }}</strong>
                        <br>
                        <small class="text-muted">KES {{ item.price }} each</small>
                    </div>
                    <strong>KES {{ item.subtotal }}</strong>
                </div>
                {% endfor %}
                
                <hr>
                <div class="d-flex justify-content-between">
                    <h5>Total Amount:</h5>
                    <h5 class="text-primary">KES {{ order.total_amount }}</h5>
                </div>
            </div>
        </div>
        
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            <strong>What's Next?</strong><br>
            We'll send you an email confirmation shortly. You can contact us at {{ shop_profile.business_email }} or {{ shop_profile.business_phone }} if you have any questions about your order.
        </div>
        
        <div class="mt-4">
            <a href="{% url 'shop_website:shop_home' shop_profile.user_profile.user.username %}" class="btn btn-primary btn-lg me-2">
                <i class="fas fa-home me-2"></i>Back to Shop
            </a>
            <a href="{% url 'shop_website:shop_products' shop_profile.user_profile.user.username %}" class="btn btn-outline-primary btn-lg">
                <i class="fas fa-shopping-bag me-2"></i>Continue Shopping
            </a>
        </div>
    </div>
</div>
{% endblock %}
